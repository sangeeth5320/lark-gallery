{"metadata":{"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}},"usedHelpers":[]},"ignored":false,"code":"// SmoothScroll for websites v1.2.1\n// Licensed under the terms of the MIT license.\n\n// People involved\n//  - Balazs Galambosi (maintainer) \n//  - Michael Herf     (Pulse Algorithm)\n\n(function () {\n\n    // Scroll Variables (tweakable)\n    var defaultOptions = {\n\n        // Scrolling Core\n        frameRate: 150, // [Hz]\n        animationTime: 400, // [px]\n        stepSize: 120, // [px]\n\n        // Pulse (less tweakable)\n        // ratio of \"tail\" to \"acceleration\"\n        pulseAlgorithm: true,\n        pulseScale: 8,\n        pulseNormalize: 1,\n\n        // Acceleration\n        accelerationDelta: 20, // 20\n        accelerationMax: 1, // 1\n\n        // Keyboard Settings\n        keyboardSupport: true, // option\n        arrowScroll: 50, // [px]\n\n        // Other\n        touchpadSupport: true,\n        fixedBackground: true,\n        excluded: \"\"\n    };\n\n    var options = defaultOptions;\n\n    // Other Variables\n    var isExcluded = false;\n    var isFrame = false;\n    var direction = { x: 0, y: 0 };\n    var initDone = false;\n    var root = document.documentElement;\n    var activeElement;\n    var observer;\n    var deltaBuffer = [120, 120, 120];\n\n    var key = { left: 37, up: 38, right: 39, down: 40, spacebar: 32,\n        pageup: 33, pagedown: 34, end: 35, home: 36 };\n\n    /***********************************************\n     * SETTINGS\n     ***********************************************/\n\n    var options = defaultOptions;\n\n    /***********************************************\n     * INITIALIZE\n     ***********************************************/\n\n    /**\n     * Tests if smooth scrolling is allowed. Shuts down everything if not.\n     */\n    function initTest() {\n\n        var disableKeyboard = false;\n\n        // disable keyboard support if anything above requested it\n        if (disableKeyboard) {\n            removeEvent(\"keydown\", keydown);\n        }\n\n        if (options.keyboardSupport && !disableKeyboard) {\n            addEvent(\"keydown\", keydown);\n        }\n    }\n\n    /**\n     * Sets up scrolls array, determines if frames are involved.\n     */\n    function init() {\n\n        if (!document.body) return;\n\n        var body = document.body;\n        var html = document.documentElement;\n        var windowHeight = window.innerHeight;\n        var scrollHeight = body.scrollHeight;\n\n        // check compat mode for root element\n        root = document.compatMode.indexOf('CSS') >= 0 ? html : body;\n        activeElement = body;\n\n        initTest();\n        initDone = true;\n\n        // Checks if this script is running in a frame\n        if (top != self) {\n            isFrame = true;\n        }\n\n        /**\n         * This fixes a bug where the areas left and right to \n         * the content does not trigger the onmousewheel event\n         * on some pages. e.g.: html, body { height: 100% }\n         */\n        else if (scrollHeight > windowHeight && (body.offsetHeight <= windowHeight || html.offsetHeight <= windowHeight)) {\n\n                // DOMChange (throttle): fix height\n                var pending = false;\n                var refresh = function () {\n                    if (!pending && html.scrollHeight != document.height) {\n                        pending = true; // add a new pending action\n                        setTimeout(function () {\n                            html.style.height = document.height + 'px';\n                            pending = false;\n                        }, 500); // act rarely to stay fast\n                    }\n                };\n                html.style.height = 'auto';\n                setTimeout(refresh, 10);\n\n                // clearfix\n                if (root.offsetHeight <= windowHeight) {\n                    var underlay = document.createElement(\"div\");\n                    underlay.style.clear = \"both\";\n                    body.appendChild(underlay);\n                }\n            }\n\n        // disable fixed background\n        if (!options.fixedBackground && !isExcluded) {\n            body.style.backgroundAttachment = \"scroll\";\n            html.style.backgroundAttachment = \"scroll\";\n        }\n    }\n\n    /************************************************\n     * SCROLLING \n     ************************************************/\n\n    var que = [];\n    var pending = false;\n    var lastScroll = +new Date();\n\n    /**\n     * Pushes scroll actions to the scrolling queue.\n     */\n    function scrollArray(elem, left, top, delay) {\n\n        delay || (delay = 1000);\n        directionCheck(left, top);\n\n        if (options.accelerationMax != 1) {\n            var now = +new Date();\n            var elapsed = now - lastScroll;\n            if (elapsed < options.accelerationDelta) {\n                var factor = (1 + 30 / elapsed) / 2;\n                if (factor > 1) {\n                    factor = Math.min(factor, options.accelerationMax);\n                    left *= factor;\n                    top *= factor;\n                }\n            }\n            lastScroll = +new Date();\n        }\n\n        // push a scroll command\n        que.push({\n            x: left,\n            y: top,\n            lastX: left < 0 ? 0.99 : -0.99,\n            lastY: top < 0 ? 0.99 : -0.99,\n            start: +new Date()\n        });\n\n        // don't act if there's a pending queue\n        if (pending) {\n            return;\n        }\n\n        var scrollWindow = elem === document.body;\n\n        var step = function (time) {\n\n            var now = +new Date();\n            var scrollX = 0;\n            var scrollY = 0;\n\n            for (var i = 0; i < que.length; i++) {\n\n                var item = que[i];\n                var elapsed = now - item.start;\n                var finished = elapsed >= options.animationTime;\n\n                // scroll position: [0, 1]\n                var position = finished ? 1 : elapsed / options.animationTime;\n\n                // easing [optional]\n                if (options.pulseAlgorithm) {\n                    position = pulse(position);\n                }\n\n                // only need the difference\n                var x = item.x * position - item.lastX >> 0;\n                var y = item.y * position - item.lastY >> 0;\n\n                // add this to the total scrolling\n                scrollX += x;\n                scrollY += y;\n\n                // update last values\n                item.lastX += x;\n                item.lastY += y;\n\n                // delete and step back if it's over\n                if (finished) {\n                    que.splice(i, 1);i--;\n                }\n            }\n\n            // scroll left and top\n            if (scrollWindow) {\n                window.scrollBy(scrollX, scrollY);\n            } else {\n                if (scrollX) elem.scrollLeft += scrollX;\n                if (scrollY) elem.scrollTop += scrollY;\n            }\n\n            // clean up if there's nothing left to do\n            if (!left && !top) {\n                que = [];\n            }\n\n            if (que.length) {\n                requestFrame(step, elem, delay / options.frameRate + 1);\n            } else {\n                pending = false;\n            }\n        };\n\n        // start a new queue of actions\n        requestFrame(step, elem, 0);\n        pending = true;\n    }\n\n    /***********************************************\n     * EVENTS\n     ***********************************************/\n\n    /**\n     * Mouse wheel handler.\n     * @param {Object} event\n     */\n    function wheel(event) {\n\n        if (!initDone) {\n            init();\n        }\n\n        var target = event.target;\n        var overflowing = overflowingAncestor(target);\n\n        // use default if there's no overflowing\n        // element or default action is prevented   \n        if (!overflowing || event.defaultPrevented || isNodeName(activeElement, \"embed\") || isNodeName(target, \"embed\") && /\\.pdf/i.test(target.src)) {\n            return true;\n        }\n\n        var deltaX = event.wheelDeltaX || 0;\n        var deltaY = event.wheelDeltaY || 0;\n\n        // use wheelDelta if deltaX/Y is not available\n        if (!deltaX && !deltaY) {\n            deltaY = event.wheelDelta || 0;\n        }\n\n        // check if it's a touchpad scroll that should be ignored\n        if (!options.touchpadSupport && isTouchpad(deltaY)) {\n            return true;\n        }\n\n        // scale by step size\n        // delta is 120 most of the time\n        // synaptics seems to send 1 sometimes\n        if (Math.abs(deltaX) > 1.2) {\n            deltaX *= options.stepSize / 120;\n        }\n        if (Math.abs(deltaY) > 1.2) {\n            deltaY *= options.stepSize / 120;\n        }\n\n        scrollArray(overflowing, -deltaX, -deltaY);\n        event.preventDefault();\n    }\n\n    /**\n     * Keydown event handler.\n     * @param {Object} event\n     */\n    function keydown(event) {\n\n        var target = event.target;\n        var modifier = event.ctrlKey || event.altKey || event.metaKey || event.shiftKey && event.keyCode !== key.spacebar;\n\n        // do nothing if user is editing text\n        // or using a modifier key (except shift)\n        // or in a dropdown\n        if (/input|textarea|select|embed/i.test(target.nodeName) || target.isContentEditable || event.defaultPrevented || modifier) {\n            return true;\n        }\n        // spacebar should trigger button press\n        if (isNodeName(target, \"button\") && event.keyCode === key.spacebar) {\n            return true;\n        }\n\n        var shift,\n            x = 0,\n            y = 0;\n        var elem = overflowingAncestor(activeElement);\n        var clientHeight = elem.clientHeight;\n\n        if (elem == document.body) {\n            clientHeight = window.innerHeight;\n        }\n\n        switch (event.keyCode) {\n            case key.up:\n                y = -options.arrowScroll;\n                break;\n            case key.down:\n                y = options.arrowScroll;\n                break;\n            case key.spacebar:\n                // (+ shift)\n                shift = event.shiftKey ? 1 : -1;\n                y = -shift * clientHeight * 0.9;\n                break;\n            case key.pageup:\n                y = -clientHeight * 0.9;\n                break;\n            case key.pagedown:\n                y = clientHeight * 0.9;\n                break;\n            case key.home:\n                y = -elem.scrollTop;\n                break;\n            case key.end:\n                var damt = elem.scrollHeight - elem.scrollTop - clientHeight;\n                y = damt > 0 ? damt + 10 : 0;\n                break;\n            case key.left:\n                x = -options.arrowScroll;\n                break;\n            case key.right:\n                x = options.arrowScroll;\n                break;\n            default:\n                return true; // a key we don't care about\n        }\n\n        scrollArray(elem, x, y);\n        event.preventDefault();\n    }\n\n    /**\n     * Mousedown event only for updating activeElement\n     */\n    function mousedown(event) {\n        activeElement = event.target;\n    }\n\n    /***********************************************\n     * OVERFLOW\n     ***********************************************/\n\n    var cache = {}; // cleared out every once in while\n    setInterval(function () {\n        cache = {};\n    }, 10 * 1000);\n\n    var uniqueID = (function () {\n        var i = 0;\n        return function (el) {\n            return el.uniqueID || (el.uniqueID = i++);\n        };\n    })();\n\n    function setCache(elems, overflowing) {\n        for (var i = elems.length; i--;) cache[uniqueID(elems[i])] = overflowing;\n        return overflowing;\n    }\n\n    function overflowingAncestor(el) {\n        var elems = [];\n        var rootScrollHeight = root.scrollHeight;\n        do {\n            var cached = cache[uniqueID(el)];\n            if (cached) {\n                return setCache(elems, cached);\n            }\n            elems.push(el);\n            if (rootScrollHeight === el.scrollHeight) {\n                if (!isFrame || root.clientHeight + 10 < rootScrollHeight) {\n                    return setCache(elems, document.body); // scrolling root in WebKit\n                }\n            } else if (el.clientHeight + 10 < el.scrollHeight) {\n                    overflow = getComputedStyle(el, \"\").getPropertyValue(\"overflow-y\");\n                    if (overflow === \"scroll\" || overflow === \"auto\") {\n                        return setCache(elems, el);\n                    }\n                }\n        } while (el = el.parentNode);\n    }\n\n    /***********************************************\n     * HELPERS\n     ***********************************************/\n\n    function addEvent(type, fn, bubble) {\n        window.addEventListener(type, fn, bubble || false);\n    }\n\n    function removeEvent(type, fn, bubble) {\n        window.removeEventListener(type, fn, bubble || false);\n    }\n\n    function isNodeName(el, tag) {\n        return (el.nodeName || \"\").toLowerCase() === tag.toLowerCase();\n    }\n\n    function directionCheck(x, y) {\n        x = x > 0 ? 1 : -1;\n        y = y > 0 ? 1 : -1;\n        if (direction.x !== x || direction.y !== y) {\n            direction.x = x;\n            direction.y = y;\n            que = [];\n            lastScroll = 0;\n        }\n    }\n\n    var deltaBufferTimer;\n\n    function isTouchpad(deltaY) {\n        if (!deltaY) return;\n        deltaY = Math.abs(deltaY);\n        deltaBuffer.push(deltaY);\n        deltaBuffer.shift();\n        clearTimeout(deltaBufferTimer);\n        var allDivisable = isDivisible(deltaBuffer[0], 120) && isDivisible(deltaBuffer[1], 120) && isDivisible(deltaBuffer[2], 120);\n        return !allDivisable;\n    }\n\n    function isDivisible(n, divisor) {\n        return Math.floor(n / divisor) == n / divisor;\n    }\n\n    var requestFrame = (function () {\n        return window.requestAnimationFrame || window.webkitRequestAnimationFrame || function (callback, element, delay) {\n            window.setTimeout(callback, delay || 1000 / 60);\n        };\n    })();\n\n    /***********************************************\n     * PULSE\n     ***********************************************/\n\n    /**\n     * Viscous fluid with a pulse for part and decay for the rest.\n     * - Applies a fixed force over an interval (a damped acceleration), and\n     * - Lets the exponential bleed away the velocity over a longer interval\n     * - Michael Herf, http://stereopsis.com/stopping/\n     */\n    function pulse_(x) {\n        var val, start, expx;\n        // test\n        x = x * options.pulseScale;\n        if (x < 1) {\n            // acceleartion\n            val = x - (1 - Math.exp(-x));\n        } else {\n            // tail\n            // the previous animation ended here:\n            start = Math.exp(-1);\n            // simple viscous drag\n            x -= 1;\n            expx = 1 - Math.exp(-x);\n            val = start + expx * (1 - start);\n        }\n        return val * options.pulseNormalize;\n    }\n\n    function pulse(x) {\n        if (x >= 1) return 1;\n        if (x <= 0) return 0;\n\n        if (options.pulseNormalize == 1) {\n            options.pulseNormalize /= pulse_(1);\n        }\n        return pulse_(x);\n    }\n\n    var isChrome = /chrome/i.test(window.navigator.userAgent);\n    var wheelEvent = null;\n    if (\"onwheel\" in document.createElement(\"div\")) wheelEvent = \"wheel\";else if (\"onmousewheel\" in document.createElement(\"div\")) wheelEvent = \"mousewheel\";\n\n    if (wheelEvent && isChrome) {\n        addEvent(wheelEvent, wheel);\n        addEvent(\"mousedown\", mousedown);\n        addEvent(\"load\", init);\n    }\n})();","ast":null,"map":{"version":3,"sources":["/client/lib/3_smoothScroll.js"],"names":[],"mappings":"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","file":"/client/lib/3_smoothScroll.js.map","sourcesContent":["// SmoothScroll for websites v1.2.1\n// Licensed under the terms of the MIT license.\n\n// People involved\n//  - Balazs Galambosi (maintainer)  \n//  - Michael Herf     (Pulse Algorithm)\n\n(function(){\n  \n// Scroll Variables (tweakable)\nvar defaultOptions = {\n\n    // Scrolling Core\n    frameRate        : 150, // [Hz]\n    animationTime    : 400, // [px]\n    stepSize         : 120, // [px]\n\n    // Pulse (less tweakable)\n    // ratio of \"tail\" to \"acceleration\"\n    pulseAlgorithm   : true,\n    pulseScale       : 8,\n    pulseNormalize   : 1,\n\n    // Acceleration\n    accelerationDelta : 20,  // 20\n    accelerationMax   : 1,   // 1\n\n    // Keyboard Settings\n    keyboardSupport   : true,  // option\n    arrowScroll       : 50,     // [px]\n\n    // Other\n    touchpadSupport   : true,\n    fixedBackground   : true, \n    excluded          : \"\"    \n};\n\nvar options = defaultOptions;\n\n\n// Other Variables\nvar isExcluded = false;\nvar isFrame = false;\nvar direction = { x: 0, y: 0 };\nvar initDone  = false;\nvar root = document.documentElement;\nvar activeElement;\nvar observer;\nvar deltaBuffer = [ 120, 120, 120 ];\n\nvar key = { left: 37, up: 38, right: 39, down: 40, spacebar: 32, \n            pageup: 33, pagedown: 34, end: 35, home: 36 };\n\n\n/***********************************************\n * SETTINGS\n ***********************************************/\n\nvar options = defaultOptions;\n\n\n/***********************************************\n * INITIALIZE\n ***********************************************/\n\n/**\n * Tests if smooth scrolling is allowed. Shuts down everything if not.\n */\nfunction initTest() {\n\n    var disableKeyboard = false; \n    \n    // disable keyboard support if anything above requested it\n    if (disableKeyboard) {\n        removeEvent(\"keydown\", keydown);\n    }\n\n    if (options.keyboardSupport && !disableKeyboard) {\n        addEvent(\"keydown\", keydown);\n    }\n}\n\n/**\n * Sets up scrolls array, determines if frames are involved.\n */\nfunction init() {\n  \n    if (!document.body) return;\n\n    var body = document.body;\n    var html = document.documentElement;\n    var windowHeight = window.innerHeight; \n    var scrollHeight = body.scrollHeight;\n    \n    // check compat mode for root element\n    root = (document.compatMode.indexOf('CSS') >= 0) ? html : body;\n    activeElement = body;\n    \n    initTest();\n    initDone = true;\n\n    // Checks if this script is running in a frame\n    if (top != self) {\n        isFrame = true;\n    }\n\n    /**\n     * This fixes a bug where the areas left and right to \n     * the content does not trigger the onmousewheel event\n     * on some pages. e.g.: html, body { height: 100% }\n     */\n    else if (scrollHeight > windowHeight &&\n            (body.offsetHeight <= windowHeight || \n             html.offsetHeight <= windowHeight)) {\n\n        // DOMChange (throttle): fix height\n        var pending = false;\n        var refresh = function () {\n            if (!pending && html.scrollHeight != document.height) {\n                pending = true; // add a new pending action\n                setTimeout(function () {\n                    html.style.height = document.height + 'px';\n                    pending = false;\n                }, 500); // act rarely to stay fast\n            }\n        };\n        html.style.height = 'auto';\n        setTimeout(refresh, 10);\n\n        // clearfix\n        if (root.offsetHeight <= windowHeight) {\n            var underlay = document.createElement(\"div\"); \t\n            underlay.style.clear = \"both\";\n            body.appendChild(underlay);\n        }\n    }\n\n    // disable fixed background\n    if (!options.fixedBackground && !isExcluded) {\n        body.style.backgroundAttachment = \"scroll\";\n        html.style.backgroundAttachment = \"scroll\";\n    }\n}\n\n\n/************************************************\n * SCROLLING \n ************************************************/\n \nvar que = [];\nvar pending = false;\nvar lastScroll = +new Date;\n\n/**\n * Pushes scroll actions to the scrolling queue.\n */\nfunction scrollArray(elem, left, top, delay) {\n    \n    delay || (delay = 1000);\n    directionCheck(left, top);\n\n    if (options.accelerationMax != 1) {\n        var now = +new Date;\n        var elapsed = now - lastScroll;\n        if (elapsed < options.accelerationDelta) {\n            var factor = (1 + (30 / elapsed)) / 2;\n            if (factor > 1) {\n                factor = Math.min(factor, options.accelerationMax);\n                left *= factor;\n                top  *= factor;\n            }\n        }\n        lastScroll = +new Date;\n    }          \n    \n    // push a scroll command\n    que.push({\n        x: left, \n        y: top, \n        lastX: (left < 0) ? 0.99 : -0.99,\n        lastY: (top  < 0) ? 0.99 : -0.99, \n        start: +new Date\n    });\n        \n    // don't act if there's a pending queue\n    if (pending) {\n        return;\n    }  \n\n    var scrollWindow = (elem === document.body);\n    \n    var step = function (time) {\n        \n        var now = +new Date;\n        var scrollX = 0;\n        var scrollY = 0; \n    \n        for (var i = 0; i < que.length; i++) {\n            \n            var item = que[i];\n            var elapsed  = now - item.start;\n            var finished = (elapsed >= options.animationTime);\n            \n            // scroll position: [0, 1]\n            var position = (finished) ? 1 : elapsed / options.animationTime;\n            \n            // easing [optional]\n            if (options.pulseAlgorithm) {\n                position = pulse(position);\n            }\n            \n            // only need the difference\n            var x = (item.x * position - item.lastX) >> 0;\n            var y = (item.y * position - item.lastY) >> 0;\n            \n            // add this to the total scrolling\n            scrollX += x;\n            scrollY += y;            \n            \n            // update last values\n            item.lastX += x;\n            item.lastY += y;\n        \n            // delete and step back if it's over\n            if (finished) {\n                que.splice(i, 1); i--;\n            }           \n        }\n\n        // scroll left and top\n        if (scrollWindow) {\n            window.scrollBy(scrollX, scrollY);\n        } \n        else {\n            if (scrollX) elem.scrollLeft += scrollX;\n            if (scrollY) elem.scrollTop  += scrollY;                    \n        }\n        \n        // clean up if there's nothing left to do\n        if (!left && !top) {\n            que = [];\n        }\n        \n        if (que.length) { \n            requestFrame(step, elem, (delay / options.frameRate + 1)); \n        } else { \n            pending = false;\n        }\n    };\n    \n    // start a new queue of actions\n    requestFrame(step, elem, 0);\n    pending = true;\n}\n\n\n/***********************************************\n * EVENTS\n ***********************************************/\n\n/**\n * Mouse wheel handler.\n * @param {Object} event\n */\nfunction wheel(event) {\n\n    if (!initDone) {\n        init();\n    }\n    \n    var target = event.target;\n    var overflowing = overflowingAncestor(target);\n    \n    // use default if there's no overflowing\n    // element or default action is prevented    \n    if (!overflowing || event.defaultPrevented ||\n        isNodeName(activeElement, \"embed\") ||\n       (isNodeName(target, \"embed\") && /\\.pdf/i.test(target.src))) {\n        return true;\n    }\n\n    var deltaX = event.wheelDeltaX || 0;\n    var deltaY = event.wheelDeltaY || 0;\n    \n    // use wheelDelta if deltaX/Y is not available\n    if (!deltaX && !deltaY) {\n        deltaY = event.wheelDelta || 0;\n    }\n\n    // check if it's a touchpad scroll that should be ignored\n    if (!options.touchpadSupport && isTouchpad(deltaY)) {\n        return true;\n    }\n\n    // scale by step size\n    // delta is 120 most of the time\n    // synaptics seems to send 1 sometimes\n    if (Math.abs(deltaX) > 1.2) {\n        deltaX *= options.stepSize / 120;\n    }\n    if (Math.abs(deltaY) > 1.2) {\n        deltaY *= options.stepSize / 120;\n    }\n    \n    scrollArray(overflowing, -deltaX, -deltaY);\n    event.preventDefault();\n}\n\n/**\n * Keydown event handler.\n * @param {Object} event\n */\nfunction keydown(event) {\n\n    var target   = event.target;\n    var modifier = event.ctrlKey || event.altKey || event.metaKey || \n                  (event.shiftKey && event.keyCode !== key.spacebar);\n    \n    // do nothing if user is editing text\n    // or using a modifier key (except shift)\n    // or in a dropdown\n    if ( /input|textarea|select|embed/i.test(target.nodeName) ||\n         target.isContentEditable || \n         event.defaultPrevented   ||\n         modifier ) {\n      return true;\n    }\n    // spacebar should trigger button press\n    if (isNodeName(target, \"button\") &&\n        event.keyCode === key.spacebar) {\n      return true;\n    }\n    \n    var shift, x = 0, y = 0;\n    var elem = overflowingAncestor(activeElement);\n    var clientHeight = elem.clientHeight;\n\n    if (elem == document.body) {\n        clientHeight = window.innerHeight;\n    }\n\n    switch (event.keyCode) {\n        case key.up:\n            y = -options.arrowScroll;\n            break;\n        case key.down:\n            y = options.arrowScroll;\n            break;         \n        case key.spacebar: // (+ shift)\n            shift = event.shiftKey ? 1 : -1;\n            y = -shift * clientHeight * 0.9;\n            break;\n        case key.pageup:\n            y = -clientHeight * 0.9;\n            break;\n        case key.pagedown:\n            y = clientHeight * 0.9;\n            break;\n        case key.home:\n            y = -elem.scrollTop;\n            break;\n        case key.end:\n            var damt = elem.scrollHeight - elem.scrollTop - clientHeight;\n            y = (damt > 0) ? damt+10 : 0;\n            break;\n        case key.left:\n            x = -options.arrowScroll;\n            break;\n        case key.right:\n            x = options.arrowScroll;\n            break;            \n        default:\n            return true; // a key we don't care about\n    }\n\n    scrollArray(elem, x, y);\n    event.preventDefault();\n}\n\n/**\n * Mousedown event only for updating activeElement\n */\nfunction mousedown(event) {\n    activeElement = event.target;\n}\n\n\n/***********************************************\n * OVERFLOW\n ***********************************************/\n \nvar cache = {}; // cleared out every once in while\nsetInterval(function () { cache = {}; }, 10 * 1000);\n\nvar uniqueID = (function () {\n    var i = 0;\n    return function (el) {\n        return el.uniqueID || (el.uniqueID = i++);\n    };\n})();\n\nfunction setCache(elems, overflowing) {\n    for (var i = elems.length; i--;)\n        cache[uniqueID(elems[i])] = overflowing;\n    return overflowing;\n}\n\nfunction overflowingAncestor(el) {\n    var elems = [];\n    var rootScrollHeight = root.scrollHeight;\n    do {\n        var cached = cache[uniqueID(el)];\n        if (cached) {\n            return setCache(elems, cached);\n        }\n        elems.push(el);\n        if (rootScrollHeight === el.scrollHeight) {\n            if (!isFrame || root.clientHeight + 10 < rootScrollHeight) {\n                return setCache(elems, document.body); // scrolling root in WebKit\n            }\n        } else if (el.clientHeight + 10 < el.scrollHeight) {\n            overflow = getComputedStyle(el, \"\").getPropertyValue(\"overflow-y\");\n            if (overflow === \"scroll\" || overflow === \"auto\") {\n                return setCache(elems, el);\n            }\n        }\n    } while (el = el.parentNode);\n}\n\n\n/***********************************************\n * HELPERS\n ***********************************************/\n\nfunction addEvent(type, fn, bubble) {\n    window.addEventListener(type, fn, (bubble||false));\n}\n\nfunction removeEvent(type, fn, bubble) {\n    window.removeEventListener(type, fn, (bubble||false));  \n}\n\nfunction isNodeName(el, tag) {\n    return (el.nodeName||\"\").toLowerCase() === tag.toLowerCase();\n}\n\nfunction directionCheck(x, y) {\n    x = (x > 0) ? 1 : -1;\n    y = (y > 0) ? 1 : -1;\n    if (direction.x !== x || direction.y !== y) {\n        direction.x = x;\n        direction.y = y;\n        que = [];\n        lastScroll = 0;\n    }\n}\n\nvar deltaBufferTimer;\n\nfunction isTouchpad(deltaY) {\n    if (!deltaY) return;\n    deltaY = Math.abs(deltaY)\n    deltaBuffer.push(deltaY);\n    deltaBuffer.shift();\n    clearTimeout(deltaBufferTimer);\n    var allDivisable = (isDivisible(deltaBuffer[0], 120) &&\n                        isDivisible(deltaBuffer[1], 120) &&\n                        isDivisible(deltaBuffer[2], 120));\n    return !allDivisable;\n} \n\nfunction isDivisible(n, divisor) {\n    return (Math.floor(n / divisor) == n / divisor);\n}\n\nvar requestFrame = (function () {\n      return  window.requestAnimationFrame       || \n              window.webkitRequestAnimationFrame || \n              function (callback, element, delay) {\n                  window.setTimeout(callback, delay || (1000/60));\n              };\n})();\n\n\n/***********************************************\n * PULSE\n ***********************************************/\n \n/**\n * Viscous fluid with a pulse for part and decay for the rest.\n * - Applies a fixed force over an interval (a damped acceleration), and\n * - Lets the exponential bleed away the velocity over a longer interval\n * - Michael Herf, http://stereopsis.com/stopping/\n */\nfunction pulse_(x) {\n    var val, start, expx;\n    // test\n    x = x * options.pulseScale;\n    if (x < 1) { // acceleartion\n        val = x - (1 - Math.exp(-x));\n    } else {     // tail\n        // the previous animation ended here:\n        start = Math.exp(-1);\n        // simple viscous drag\n        x -= 1;\n        expx = 1 - Math.exp(-x);\n        val = start + (expx * (1 - start));\n    }\n    return val * options.pulseNormalize;\n}\n\nfunction pulse(x) {\n    if (x >= 1) return 1;\n    if (x <= 0) return 0;\n\n    if (options.pulseNormalize == 1) {\n        options.pulseNormalize /= pulse_(1);\n    }\n    return pulse_(x);\n}\n\nvar isChrome = /chrome/i.test(window.navigator.userAgent);\nvar wheelEvent = null;\nif (\"onwheel\" in document.createElement(\"div\"))\n\twheelEvent = \"wheel\";\nelse if (\"onmousewheel\" in document.createElement(\"div\"))\n\twheelEvent = \"mousewheel\";\n\nif (wheelEvent && isChrome) {\n\taddEvent(wheelEvent, wheel);\n\taddEvent(\"mousedown\", mousedown);\n\taddEvent(\"load\", init);\n}\n\n})();"]},"hash":"f3eb8f712fae68525ac2638159c948b9a6ad1551"}
